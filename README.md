<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Project</a>
<ul>
<li><a href="#sec-1-1">1.1. Merges the training and the test sets to create one data set</a>
<ul>
<li><a href="#sec-1-1-1">1.1.1. Read and filter the training data</a></li>
<li><a href="#sec-1-1-2">1.1.2. Read and filter the test data</a></li>
<li><a href="#sec-1-1-3">1.1.3. Merges the train and test data sets</a></li>
<li><a href="#sec-1-1-4">1.1.4. Melt the data</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

# Project

The purpose of this project is to demonstrate your ability to collect,
work with, and clean a data set. The goal is to prepare tidy data that
can be used for later analysis. You will be graded by your peers on a
series of yes/no questions related to the project. You will be
required to submit: 1) a tidy data set as described below, 2) a link
to a Github repository with your script for performing the analysis,
and 3) a code book that describes the variables, the data, and any
transformations or work that you performed to clean up the data called
CodeBook.md. You should also include a README.md in the repo with your
scripts. This repo explains how all of the scripts work and how they
are connected.

One of the most exciting areas in all of data science right now is
wearable computing - see for example this article . Companies like
Fitbit, Nike, and Jawbone Up are racing to develop the most advanced
algorithms to attract new users. The data linked to from the course
website represent data collected from the accelerometers from the
Samsung Galaxy S smartphone. A full description is available at the
site where the data was obtained:

<http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones>

Here are the data for the project:

<https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip> 

You should create one R script called run<sub>analysis</sub>.R that does the
following.

1.  Merges the training and the test sets to create one data set.

2.  Extracts only the measurements on the mean and standard deviation
    for each measurement.

3.  Uses descriptive activity names to name the activities in the data
    set

4.  Appropriately labels the data set with descriptive variable names.

5.  Creates a second, independent tidy data set with the average of
    each variable for each activity and each subject.

## Merges the training and the test sets to create one data set

### Read and filter the training data

Once you've downloaded and unzipped the data, you have to run the
script `analysys_run.R` in the folder which contains `UCI HAR
Dataset`.

This first part of the script, reads the data.

    
    xvals.train <- read.table("UCI HAR Dataset/train/X_train.txt")
    yvals.train <- read.table("UCI HAR Dataset/train/y_train.txt")
    features <- read.table('UCI HAR Dataset/features.txt')
    subject.train <- read.table("UCI HAR Dataset/train/subject_train.txt")

    

Now assing the colnames using the file `features` as the column names
and assign meaninful names to the activity values. From this (long)
list of feature, we `grep` only those vars which refer to average o
standard deviation.

    colnames(xvals.train) <- features[,2]
    
    xvals.train.msd = subset(xvals.train, select=(names(xvals.train)[grep('mean|std',names(xvals.train))]))
    yvals.train <- yvals.train[,1]
    yvals.train[yvals.train==1]="walking"
    yvals.train[yvals.train==2]="walking up"
    yvals.train[yvals.train==3]="walking down"
    yvals.train[yvals.train==4]="sitting"
    yvals.train[yvals.train==5]="standing"
    yvals.train[yvals.train==6]="laying"
    
    xvals.train.msd$subject <- subject.train[,1]
    xvals.train.msd$activity <- yvals.train
    
    str(xvals.train.msd)

    'data.frame':   7352 obs. of  81 variables:
     $ tBodyAcc-mean()-X              : num  0.289 0.278 0.28 0.279 0.277 ...
     $ tBodyAcc-mean()-Y              : num  -0.0203 -0.0164 -0.0195 -0.0262 -0.0166 ...
     $ tBodyAcc-mean()-Z              : num  -0.133 -0.124 -0.113 -0.123 -0.115 ...
     $ tBodyAcc-std()-X               : num  -0.995 -0.998 -0.995 -0.996 -0.998 ...
     $ tBodyAcc-std()-Y               : num  -0.983 -0.975 -0.967 -0.983 -0.981 ...
     $ tBodyAcc-std()-Z               : num  -0.914 -0.96 -0.979 -0.991 -0.99 ...
     $ tGravityAcc-mean()-X           : num  0.963 0.967 0.967 0.968 0.968 ...
     $ tGravityAcc-mean()-Y           : num  -0.141 -0.142 -0.142 -0.144 -0.149 ...
     $ tGravityAcc-mean()-Z           : num  0.1154 0.1094 0.1019 0.0999 0.0945 ...
     $ tGravityAcc-std()-X            : num  -0.985 -0.997 -1 -0.997 -0.998 ...
     $ tGravityAcc-std()-Y            : num  -0.982 -0.989 -0.993 -0.981 -0.988 ...
     $ tGravityAcc-std()-Z            : num  -0.878 -0.932 -0.993 -0.978 -0.979 ...
     $ tBodyAccJerk-mean()-X          : num  0.078 0.074 0.0736 0.0773 0.0734 ...
     $ tBodyAccJerk-mean()-Y          : num  0.005 0.00577 0.0031 0.02006 0.01912 ...
     $ tBodyAccJerk-mean()-Z          : num  -0.06783 0.02938 -0.00905 -0.00986 0.01678 ...
     $ tBodyAccJerk-std()-X           : num  -0.994 -0.996 -0.991 -0.993 -0.996 ...
     $ tBodyAccJerk-std()-Y           : num  -0.988 -0.981 -0.981 -0.988 -0.988 ...
     $ tBodyAccJerk-std()-Z           : num  -0.994 -0.992 -0.99 -0.993 -0.992 ...
     $ tBodyGyro-mean()-X             : num  -0.0061 -0.0161 -0.0317 -0.0434 -0.034 ...
     $ tBodyGyro-mean()-Y             : num  -0.0314 -0.0839 -0.1023 -0.0914 -0.0747 ...
     $ tBodyGyro-mean()-Z             : num  0.1077 0.1006 0.0961 0.0855 0.0774 ...
     $ tBodyGyro-std()-X              : num  -0.985 -0.983 -0.976 -0.991 -0.985 ...
     $ tBodyGyro-std()-Y              : num  -0.977 -0.989 -0.994 -0.992 -0.992 ...
     $ tBodyGyro-std()-Z              : num  -0.992 -0.989 -0.986 -0.988 -0.987 ...
     $ tBodyGyroJerk-mean()-X         : num  -0.0992 -0.1105 -0.1085 -0.0912 -0.0908 ...
     $ tBodyGyroJerk-mean()-Y         : num  -0.0555 -0.0448 -0.0424 -0.0363 -0.0376 ...
     $ tBodyGyroJerk-mean()-Z         : num  -0.062 -0.0592 -0.0558 -0.0605 -0.0583 ...
     $ tBodyGyroJerk-std()-X          : num  -0.992 -0.99 -0.988 -0.991 -0.991 ...
     $ tBodyGyroJerk-std()-Y          : num  -0.993 -0.997 -0.996 -0.997 -0.996 ...
     $ tBodyGyroJerk-std()-Z          : num  -0.992 -0.994 -0.992 -0.993 -0.995 ...
     $ tBodyAccMag-mean()             : num  -0.959 -0.979 -0.984 -0.987 -0.993 ...
     $ tBodyAccMag-std()              : num  -0.951 -0.976 -0.988 -0.986 -0.991 ...
     $ tGravityAccMag-mean()          : num  -0.959 -0.979 -0.984 -0.987 -0.993 ...
     $ tGravityAccMag-std()           : num  -0.951 -0.976 -0.988 -0.986 -0.991 ...
     $ tBodyAccJerkMag-mean()         : num  -0.993 -0.991 -0.989 -0.993 -0.993 ...
     $ tBodyAccJerkMag-std()          : num  -0.994 -0.992 -0.99 -0.993 -0.996 ...
     $ tBodyGyroMag-mean()            : num  -0.969 -0.981 -0.976 -0.982 -0.985 ...
     $ tBodyGyroMag-std()             : num  -0.964 -0.984 -0.986 -0.987 -0.989 ...
     $ tBodyGyroJerkMag-mean()        : num  -0.994 -0.995 -0.993 -0.996 -0.996 ...
     $ tBodyGyroJerkMag-std()         : num  -0.991 -0.996 -0.995 -0.995 -0.995 ...
     $ fBodyAcc-mean()-X              : num  -0.995 -0.997 -0.994 -0.995 -0.997 ...
     $ fBodyAcc-mean()-Y              : num  -0.983 -0.977 -0.973 -0.984 -0.982 ...
     $ fBodyAcc-mean()-Z              : num  -0.939 -0.974 -0.983 -0.991 -0.988 ...
     $ fBodyAcc-std()-X               : num  -0.995 -0.999 -0.996 -0.996 -0.999 ...
     $ fBodyAcc-std()-Y               : num  -0.983 -0.975 -0.966 -0.983 -0.98 ...
     $ fBodyAcc-std()-Z               : num  -0.906 -0.955 -0.977 -0.99 -0.992 ...
     $ fBodyAcc-meanFreq()-X          : num  0.252 0.271 0.125 0.029 0.181 ...
     $ fBodyAcc-meanFreq()-Y          : num  0.1318 0.0429 -0.0646 0.0803 0.058 ...
     $ fBodyAcc-meanFreq()-Z          : num  -0.0521 -0.0143 0.0827 0.1857 0.5598 ...
     $ fBodyAccJerk-mean()-X          : num  -0.992 -0.995 -0.991 -0.994 -0.996 ...
     $ fBodyAccJerk-mean()-Y          : num  -0.987 -0.981 -0.982 -0.989 -0.989 ...
     $ fBodyAccJerk-mean()-Z          : num  -0.99 -0.99 -0.988 -0.991 -0.991 ...
     $ fBodyAccJerk-std()-X           : num  -0.996 -0.997 -0.991 -0.991 -0.997 ...
     $ fBodyAccJerk-std()-Y           : num  -0.991 -0.982 -0.981 -0.987 -0.989 ...
     $ fBodyAccJerk-std()-Z           : num  -0.997 -0.993 -0.99 -0.994 -0.993 ...
     $ fBodyAccJerk-meanFreq()-X      : num  0.8704 0.6085 0.1154 0.0358 0.2734 ...
     $ fBodyAccJerk-meanFreq()-Y      : num  0.2107 -0.0537 -0.1934 -0.093 0.0791 ...
     $ fBodyAccJerk-meanFreq()-Z      : num  0.2637 0.0631 0.0383 0.1681 0.2924 ...
     $ fBodyGyro-mean()-X             : num  -0.987 -0.977 -0.975 -0.987 -0.982 ...
     $ fBodyGyro-mean()-Y             : num  -0.982 -0.993 -0.994 -0.994 -0.993 ...
     $ fBodyGyro-mean()-Z             : num  -0.99 -0.99 -0.987 -0.987 -0.989 ...
     $ fBodyGyro-std()-X              : num  -0.985 -0.985 -0.977 -0.993 -0.986 ...
     $ fBodyGyro-std()-Y              : num  -0.974 -0.987 -0.993 -0.992 -0.992 ...
     $ fBodyGyro-std()-Z              : num  -0.994 -0.99 -0.987 -0.989 -0.988 ...
     $ fBodyGyro-meanFreq()-X         : num  -0.2575 -0.0482 -0.2167 0.2169 -0.1533 ...
     $ fBodyGyro-meanFreq()-Y         : num  0.0979 -0.4016 -0.0173 -0.1352 -0.0884 ...
     $ fBodyGyro-meanFreq()-Z         : num  0.5472 -0.0682 -0.1107 -0.0497 -0.1622 ...
     $ fBodyAccMag-mean()             : num  -0.952 -0.981 -0.988 -0.988 -0.994 ...
     $ fBodyAccMag-std()              : num  -0.956 -0.976 -0.989 -0.987 -0.99 ...
     $ fBodyAccMag-meanFreq()         : num  -0.0884 -0.0441 0.2579 0.0736 0.3943 ...
     $ fBodyBodyAccJerkMag-mean()     : num  -0.994 -0.99 -0.989 -0.993 -0.996 ...
     $ fBodyBodyAccJerkMag-std()      : num  -0.994 -0.992 -0.991 -0.992 -0.994 ...
     $ fBodyBodyAccJerkMag-meanFreq() : num  0.347 0.532 0.661 0.679 0.559 ...
     $ fBodyBodyGyroMag-mean()        : num  -0.98 -0.988 -0.989 -0.989 -0.991 ...
     $ fBodyBodyGyroMag-std()         : num  -0.961 -0.983 -0.986 -0.988 -0.989 ...
     $ fBodyBodyGyroMag-meanFreq()    : num  -0.129 -0.272 -0.2127 -0.0357 -0.2736 ...
     $ fBodyBodyGyroJerkMag-mean()    : num  -0.992 -0.996 -0.995 -0.995 -0.995 ...
     $ fBodyBodyGyroJerkMag-std()     : num  -0.991 -0.996 -0.995 -0.995 -0.995 ...
     $ fBodyBodyGyroJerkMag-meanFreq(): num  -0.0743 0.1581 0.4145 0.4046 0.0878 ...
     $ subject                        : int  1 1 1 1 1 1 1 1 1 1 ...
     $ activity                       : chr  "standing" "standing" "standing" "standing" ...

At this point, we have a **train** dataset with meaningful column names,
subject and activity. We then proceed the same way with test data.

### Read and filter the test data

This part executes the same commands we've seen for the train data,
using the test data.

    
    xvals.test <- read.table("UCI HAR Dataset/test/X_test.txt")
    yvals.test <- read.table("UCI HAR Dataset/test/y_test.txt")
    subject.test <- read.table("UCI HAR Dataset/test/subject_test.txt")
    
    
    colnames(xvals.test) <- features[,2]
    
    xvals.test.msd = subset(xvals.test, select=(names(xvals.test)[grep('mean|std',names(xvals.test))]))
    yvals.test <- yvals.test[,1]
    yvals.test[yvals.test==1]="walking"
    yvals.test[yvals.test==2]="walking up"
    yvals.test[yvals.test==3]="walking down"
    yvals.test[yvals.test==4]="sitting"
    yvals.test[yvals.test==5]="standing"
    yvals.test[yvals.test==6]="laying"
    
    xvals.test.msd$subject <- subject.test[,1]
    xvals.test.msd$activity <- yvals.test
    
    str(xvals.test.msd)

    'data.frame':   2947 obs. of  81 variables:
     $ tBodyAcc-mean()-X              : num  0.257 0.286 0.275 0.27 0.275 ...
     $ tBodyAcc-mean()-Y              : num  -0.0233 -0.0132 -0.0261 -0.0326 -0.0278 ...
     $ tBodyAcc-mean()-Z              : num  -0.0147 -0.1191 -0.1182 -0.1175 -0.1295 ...
     $ tBodyAcc-std()-X               : num  -0.938 -0.975 -0.994 -0.995 -0.994 ...
     $ tBodyAcc-std()-Y               : num  -0.92 -0.967 -0.97 -0.973 -0.967 ...
     $ tBodyAcc-std()-Z               : num  -0.668 -0.945 -0.963 -0.967 -0.978 ...
     $ tGravityAcc-mean()-X           : num  0.936 0.927 0.93 0.929 0.927 ...
     $ tGravityAcc-mean()-Y           : num  -0.283 -0.289 -0.288 -0.293 -0.303 ...
     $ tGravityAcc-mean()-Z           : num  0.115 0.153 0.146 0.143 0.138 ...
     $ tGravityAcc-std()-X            : num  -0.925 -0.989 -0.996 -0.993 -0.996 ...
     $ tGravityAcc-std()-Y            : num  -0.937 -0.984 -0.988 -0.97 -0.971 ...
     $ tGravityAcc-std()-Z            : num  -0.564 -0.965 -0.982 -0.992 -0.968 ...
     $ tBodyAccJerk-mean()-X          : num  0.072 0.0702 0.0694 0.0749 0.0784 ...
     $ tBodyAccJerk-mean()-Y          : num  0.04575 -0.01788 -0.00491 0.03227 0.02228 ...
     $ tBodyAccJerk-mean()-Z          : num  -0.10604 -0.00172 -0.01367 0.01214 0.00275 ...
     $ tBodyAccJerk-std()-X           : num  -0.907 -0.949 -0.991 -0.991 -0.992 ...
     $ tBodyAccJerk-std()-Y           : num  -0.938 -0.973 -0.971 -0.973 -0.979 ...
     $ tBodyAccJerk-std()-Z           : num  -0.936 -0.978 -0.973 -0.976 -0.987 ...
     $ tBodyGyro-mean()-X             : num  0.11998 -0.00155 -0.04821 -0.05664 -0.05999 ...
     $ tBodyGyro-mean()-Y             : num  -0.0918 -0.1873 -0.1663 -0.126 -0.0847 ...
     $ tBodyGyro-mean()-Z             : num  0.1896 0.1807 0.1542 0.1183 0.0787 ...
     $ tBodyGyro-std()-X              : num  -0.883 -0.926 -0.973 -0.968 -0.975 ...
     $ tBodyGyro-std()-Y              : num  -0.816 -0.93 -0.979 -0.975 -0.978 ...
     $ tBodyGyro-std()-Z              : num  -0.941 -0.968 -0.976 -0.963 -0.968 ...
     $ tBodyGyroJerk-mean()-X         : num  -0.2049 -0.1387 -0.0978 -0.1022 -0.0918 ...
     $ tBodyGyroJerk-mean()-Y         : num  -0.1745 -0.0258 -0.0342 -0.0447 -0.029 ...
     $ tBodyGyroJerk-mean()-Z         : num  -0.0934 -0.0714 -0.06 -0.0534 -0.0612 ...
     $ tBodyGyroJerk-std()-X          : num  -0.901 -0.962 -0.984 -0.984 -0.988 ...
     $ tBodyGyroJerk-std()-Y          : num  -0.911 -0.956 -0.988 -0.99 -0.992 ...
     $ tBodyGyroJerk-std()-Z          : num  -0.939 -0.981 -0.976 -0.981 -0.982 ...
     $ tBodyAccMag-mean()             : num  -0.867 -0.969 -0.976 -0.974 -0.976 ...
     $ tBodyAccMag-std()              : num  -0.705 -0.954 -0.979 -0.977 -0.977 ...
     $ tGravityAccMag-mean()          : num  -0.867 -0.969 -0.976 -0.974 -0.976 ...
     $ tGravityAccMag-std()           : num  -0.705 -0.954 -0.979 -0.977 -0.977 ...
     $ tBodyAccJerkMag-mean()         : num  -0.93 -0.974 -0.982 -0.983 -0.987 ...
     $ tBodyAccJerkMag-std()          : num  -0.896 -0.941 -0.971 -0.975 -0.989 ...
     $ tBodyGyroMag-mean()            : num  -0.796 -0.898 -0.939 -0.947 -0.957 ...
     $ tBodyGyroMag-std()             : num  -0.762 -0.911 -0.972 -0.97 -0.969 ...
     $ tBodyGyroJerkMag-mean()        : num  -0.925 -0.973 -0.987 -0.989 -0.99 ...
     $ tBodyGyroJerkMag-std()         : num  -0.894 -0.944 -0.984 -0.986 -0.99 ...
     $ fBodyAcc-mean()-X              : num  -0.919 -0.961 -0.992 -0.993 -0.992 ...
     $ fBodyAcc-mean()-Y              : num  -0.918 -0.964 -0.965 -0.968 -0.969 ...
     $ fBodyAcc-mean()-Z              : num  -0.789 -0.957 -0.967 -0.967 -0.98 ...
     $ fBodyAcc-std()-X               : num  -0.948 -0.984 -0.995 -0.996 -0.995 ...
     $ fBodyAcc-std()-Y               : num  -0.925 -0.97 -0.974 -0.977 -0.967 ...
     $ fBodyAcc-std()-Z               : num  -0.636 -0.942 -0.962 -0.969 -0.978 ...
     $ fBodyAcc-meanFreq()-X          : num  0.0111 0.3521 0.1804 0.0627 -0.0189 ...
     $ fBodyAcc-meanFreq()-Y          : num  0.12125 0.17455 0.13346 0.26172 -0.00998 ...
     $ fBodyAcc-meanFreq()-Z          : num  -0.5229 -0.3207 0.1827 0.1518 0.0952 ...
     $ fBodyAccJerk-mean()-X          : num  -0.9 -0.944 -0.991 -0.991 -0.991 ...
     $ fBodyAccJerk-mean()-Y          : num  -0.937 -0.969 -0.973 -0.972 -0.98 ...
     $ fBodyAccJerk-mean()-Z          : num  -0.924 -0.973 -0.972 -0.97 -0.983 ...
     $ fBodyAccJerk-std()-X           : num  -0.924 -0.962 -0.992 -0.992 -0.994 ...
     $ fBodyAccJerk-std()-Y           : num  -0.943 -0.98 -0.971 -0.975 -0.979 ...
     $ fBodyAccJerk-std()-Z           : num  -0.948 -0.981 -0.972 -0.981 -0.989 ...
     $ fBodyAccJerk-meanFreq()-X      : num  0.451 0.473 0.271 0.277 0.18 ...
     $ fBodyAccJerk-meanFreq()-Y      : num  0.1372 0.1672 -0.2722 -0.0383 -0.1392 ...
     $ fBodyAccJerk-meanFreq()-Z      : num  -0.1803 -0.2431 -0.0825 0.0218 0.1009 ...
     $ fBodyGyro-mean()-X             : num  -0.824 -0.923 -0.973 -0.972 -0.976 ...
     $ fBodyGyro-mean()-Y             : num  -0.808 -0.926 -0.981 -0.981 -0.98 ...
     $ fBodyGyro-mean()-Z             : num  -0.918 -0.968 -0.972 -0.967 -0.969 ...
     $ fBodyGyro-std()-X              : num  -0.903 -0.927 -0.973 -0.967 -0.974 ...
     $ fBodyGyro-std()-Y              : num  -0.823 -0.932 -0.977 -0.972 -0.977 ...
     $ fBodyGyro-std()-Z              : num  -0.956 -0.97 -0.979 -0.965 -0.97 ...
     $ fBodyGyro-meanFreq()-X         : num  0.184 0.0181 -0.4791 -0.497 -0.4275 ...
     $ fBodyGyro-meanFreq()-Y         : num  -0.0593 -0.2273 -0.2101 -0.4999 -0.2781 ...
     $ fBodyGyro-meanFreq()-Z         : num  0.4381 -0.1517 0.0493 -0.2589 -0.2913 ...
     $ fBodyAccMag-mean()             : num  -0.791 -0.954 -0.976 -0.973 -0.978 ...
     $ fBodyAccMag-std()              : num  -0.711 -0.96 -0.984 -0.982 -0.979 ...
     $ fBodyAccMag-meanFreq()         : num  -0.4835 0.2035 0.3425 0.3312 0.0711 ...
     $ fBodyBodyAccJerkMag-mean()     : num  -0.895 -0.945 -0.971 -0.972 -0.987 ...
     $ fBodyBodyAccJerkMag-std()      : num  -0.896 -0.934 -0.97 -0.978 -0.99 ...
     $ fBodyBodyAccJerkMag-meanFreq() : num  -0.0354 -0.4912 0.1407 0.1486 0.4222 ...
     $ fBodyBodyGyroMag-mean()        : num  -0.771 -0.924 -0.975 -0.976 -0.977 ...
     $ fBodyBodyGyroMag-std()         : num  -0.797 -0.917 -0.974 -0.971 -0.97 ...
     $ fBodyBodyGyroMag-meanFreq()    : num  -0.0474 -0.0315 -0.1688 -0.2856 -0.3491 ...
     $ fBodyBodyGyroJerkMag-mean()    : num  -0.89 -0.952 -0.986 -0.986 -0.99 ...
     $ fBodyBodyGyroJerkMag-std()     : num  -0.907 -0.938 -0.983 -0.986 -0.991 ...
     $ fBodyBodyGyroJerkMag-meanFreq(): num  0.0716 -0.4012 0.0629 0.1167 -0.1217 ...
     $ subject                        : int  2 2 2 2 2 2 2 2 2 2 ...
     $ activity                       : chr  "standing" "standing" "standing" "standing" ...

### Merges the train and test data sets

Now we can merge the train and test data frames, by rows.

    vals.merged = rbind(xvals.train.msd,xvals.test.msd)
    str(vals.merged)

    'data.frame':   10299 obs. of  81 variables:
     $ tBodyAcc-mean()-X              : num  0.289 0.278 0.28 0.279 0.277 ...
     $ tBodyAcc-mean()-Y              : num  -0.0203 -0.0164 -0.0195 -0.0262 -0.0166 ...
     $ tBodyAcc-mean()-Z              : num  -0.133 -0.124 -0.113 -0.123 -0.115 ...
     $ tBodyAcc-std()-X               : num  -0.995 -0.998 -0.995 -0.996 -0.998 ...
     $ tBodyAcc-std()-Y               : num  -0.983 -0.975 -0.967 -0.983 -0.981 ...
     $ tBodyAcc-std()-Z               : num  -0.914 -0.96 -0.979 -0.991 -0.99 ...
     $ tGravityAcc-mean()-X           : num  0.963 0.967 0.967 0.968 0.968 ...
     $ tGravityAcc-mean()-Y           : num  -0.141 -0.142 -0.142 -0.144 -0.149 ...
     $ tGravityAcc-mean()-Z           : num  0.1154 0.1094 0.1019 0.0999 0.0945 ...
     $ tGravityAcc-std()-X            : num  -0.985 -0.997 -1 -0.997 -0.998 ...
     $ tGravityAcc-std()-Y            : num  -0.982 -0.989 -0.993 -0.981 -0.988 ...
     $ tGravityAcc-std()-Z            : num  -0.878 -0.932 -0.993 -0.978 -0.979 ...
     $ tBodyAccJerk-mean()-X          : num  0.078 0.074 0.0736 0.0773 0.0734 ...
     $ tBodyAccJerk-mean()-Y          : num  0.005 0.00577 0.0031 0.02006 0.01912 ...
     $ tBodyAccJerk-mean()-Z          : num  -0.06783 0.02938 -0.00905 -0.00986 0.01678 ...
     $ tBodyAccJerk-std()-X           : num  -0.994 -0.996 -0.991 -0.993 -0.996 ...
     $ tBodyAccJerk-std()-Y           : num  -0.988 -0.981 -0.981 -0.988 -0.988 ...
     $ tBodyAccJerk-std()-Z           : num  -0.994 -0.992 -0.99 -0.993 -0.992 ...
     $ tBodyGyro-mean()-X             : num  -0.0061 -0.0161 -0.0317 -0.0434 -0.034 ...
     $ tBodyGyro-mean()-Y             : num  -0.0314 -0.0839 -0.1023 -0.0914 -0.0747 ...
     $ tBodyGyro-mean()-Z             : num  0.1077 0.1006 0.0961 0.0855 0.0774 ...
     $ tBodyGyro-std()-X              : num  -0.985 -0.983 -0.976 -0.991 -0.985 ...
     $ tBodyGyro-std()-Y              : num  -0.977 -0.989 -0.994 -0.992 -0.992 ...
     $ tBodyGyro-std()-Z              : num  -0.992 -0.989 -0.986 -0.988 -0.987 ...
     $ tBodyGyroJerk-mean()-X         : num  -0.0992 -0.1105 -0.1085 -0.0912 -0.0908 ...
     $ tBodyGyroJerk-mean()-Y         : num  -0.0555 -0.0448 -0.0424 -0.0363 -0.0376 ...
     $ tBodyGyroJerk-mean()-Z         : num  -0.062 -0.0592 -0.0558 -0.0605 -0.0583 ...
     $ tBodyGyroJerk-std()-X          : num  -0.992 -0.99 -0.988 -0.991 -0.991 ...
     $ tBodyGyroJerk-std()-Y          : num  -0.993 -0.997 -0.996 -0.997 -0.996 ...
     $ tBodyGyroJerk-std()-Z          : num  -0.992 -0.994 -0.992 -0.993 -0.995 ...
     $ tBodyAccMag-mean()             : num  -0.959 -0.979 -0.984 -0.987 -0.993 ...
     $ tBodyAccMag-std()              : num  -0.951 -0.976 -0.988 -0.986 -0.991 ...
     $ tGravityAccMag-mean()          : num  -0.959 -0.979 -0.984 -0.987 -0.993 ...
     $ tGravityAccMag-std()           : num  -0.951 -0.976 -0.988 -0.986 -0.991 ...
     $ tBodyAccJerkMag-mean()         : num  -0.993 -0.991 -0.989 -0.993 -0.993 ...
     $ tBodyAccJerkMag-std()          : num  -0.994 -0.992 -0.99 -0.993 -0.996 ...
     $ tBodyGyroMag-mean()            : num  -0.969 -0.981 -0.976 -0.982 -0.985 ...
     $ tBodyGyroMag-std()             : num  -0.964 -0.984 -0.986 -0.987 -0.989 ...
     $ tBodyGyroJerkMag-mean()        : num  -0.994 -0.995 -0.993 -0.996 -0.996 ...
     $ tBodyGyroJerkMag-std()         : num  -0.991 -0.996 -0.995 -0.995 -0.995 ...
     $ fBodyAcc-mean()-X              : num  -0.995 -0.997 -0.994 -0.995 -0.997 ...
     $ fBodyAcc-mean()-Y              : num  -0.983 -0.977 -0.973 -0.984 -0.982 ...
     $ fBodyAcc-mean()-Z              : num  -0.939 -0.974 -0.983 -0.991 -0.988 ...
     $ fBodyAcc-std()-X               : num  -0.995 -0.999 -0.996 -0.996 -0.999 ...
     $ fBodyAcc-std()-Y               : num  -0.983 -0.975 -0.966 -0.983 -0.98 ...
     $ fBodyAcc-std()-Z               : num  -0.906 -0.955 -0.977 -0.99 -0.992 ...
     $ fBodyAcc-meanFreq()-X          : num  0.252 0.271 0.125 0.029 0.181 ...
     $ fBodyAcc-meanFreq()-Y          : num  0.1318 0.0429 -0.0646 0.0803 0.058 ...
     $ fBodyAcc-meanFreq()-Z          : num  -0.0521 -0.0143 0.0827 0.1857 0.5598 ...
     $ fBodyAccJerk-mean()-X          : num  -0.992 -0.995 -0.991 -0.994 -0.996 ...
     $ fBodyAccJerk-mean()-Y          : num  -0.987 -0.981 -0.982 -0.989 -0.989 ...
     $ fBodyAccJerk-mean()-Z          : num  -0.99 -0.99 -0.988 -0.991 -0.991 ...
     $ fBodyAccJerk-std()-X           : num  -0.996 -0.997 -0.991 -0.991 -0.997 ...
     $ fBodyAccJerk-std()-Y           : num  -0.991 -0.982 -0.981 -0.987 -0.989 ...
     $ fBodyAccJerk-std()-Z           : num  -0.997 -0.993 -0.99 -0.994 -0.993 ...
     $ fBodyAccJerk-meanFreq()-X      : num  0.8704 0.6085 0.1154 0.0358 0.2734 ...
     $ fBodyAccJerk-meanFreq()-Y      : num  0.2107 -0.0537 -0.1934 -0.093 0.0791 ...
     $ fBodyAccJerk-meanFreq()-Z      : num  0.2637 0.0631 0.0383 0.1681 0.2924 ...
     $ fBodyGyro-mean()-X             : num  -0.987 -0.977 -0.975 -0.987 -0.982 ...
     $ fBodyGyro-mean()-Y             : num  -0.982 -0.993 -0.994 -0.994 -0.993 ...
     $ fBodyGyro-mean()-Z             : num  -0.99 -0.99 -0.987 -0.987 -0.989 ...
     $ fBodyGyro-std()-X              : num  -0.985 -0.985 -0.977 -0.993 -0.986 ...
     $ fBodyGyro-std()-Y              : num  -0.974 -0.987 -0.993 -0.992 -0.992 ...
     $ fBodyGyro-std()-Z              : num  -0.994 -0.99 -0.987 -0.989 -0.988 ...
     $ fBodyGyro-meanFreq()-X         : num  -0.2575 -0.0482 -0.2167 0.2169 -0.1533 ...
     $ fBodyGyro-meanFreq()-Y         : num  0.0979 -0.4016 -0.0173 -0.1352 -0.0884 ...
     $ fBodyGyro-meanFreq()-Z         : num  0.5472 -0.0682 -0.1107 -0.0497 -0.1622 ...
     $ fBodyAccMag-mean()             : num  -0.952 -0.981 -0.988 -0.988 -0.994 ...
     $ fBodyAccMag-std()              : num  -0.956 -0.976 -0.989 -0.987 -0.99 ...
     $ fBodyAccMag-meanFreq()         : num  -0.0884 -0.0441 0.2579 0.0736 0.3943 ...
     $ fBodyBodyAccJerkMag-mean()     : num  -0.994 -0.99 -0.989 -0.993 -0.996 ...
     $ fBodyBodyAccJerkMag-std()      : num  -0.994 -0.992 -0.991 -0.992 -0.994 ...
     $ fBodyBodyAccJerkMag-meanFreq() : num  0.347 0.532 0.661 0.679 0.559 ...
     $ fBodyBodyGyroMag-mean()        : num  -0.98 -0.988 -0.989 -0.989 -0.991 ...
     $ fBodyBodyGyroMag-std()         : num  -0.961 -0.983 -0.986 -0.988 -0.989 ...
     $ fBodyBodyGyroMag-meanFreq()    : num  -0.129 -0.272 -0.2127 -0.0357 -0.2736 ...
     $ fBodyBodyGyroJerkMag-mean()    : num  -0.992 -0.996 -0.995 -0.995 -0.995 ...
     $ fBodyBodyGyroJerkMag-std()     : num  -0.991 -0.996 -0.995 -0.995 -0.995 ...
     $ fBodyBodyGyroJerkMag-meanFreq(): num  -0.0743 0.1581 0.4145 0.4046 0.0878 ...
     $ subject                        : int  1 1 1 1 1 1 1 1 1 1 ...
     $ activity                       : chr  "standing" "standing" "standing" "standing" ...

### Melt the data

Now, we're going to make use of the `reshape2` package in order to
obtain a more suitable data frame.

    library(reshape2)
    vals.melted = melt(vals.merged, id=c('subject','activity'), measure.vars=c(1:79))
    head(vals.melted, n=3)
    tail(vals.melted, n=3)

      subject activity          variable     value
    1       1 standing tBodyAcc-mean()-X 0.2885845
    2       1 standing tBodyAcc-mean()-X 0.2784188
    3       1 standing tBodyAcc-mean()-X 0.2796531
           subject   activity                        variable       value
    813619      24 walking up fBodyBodyGyroJerkMag-meanFreq() -0.06624872
    813620      24 walking up fBodyBodyGyroJerkMag-meanFreq() -0.04646651
    813621      24 walking up fBodyBodyGyroJerkMag-meanFreq() -0.01038585

In order to compute the average of each variable, we can make use of
the `dcast` function, so we produce 180 observations; one row for
subject and activity, there are 30 subjects and 6 activities. The
variables hold the averages of the measures.

    vals.mean = dcast(vals.melted, subject + activity ~ ..., mean)
    str(vals.mean)

    'data.frame':   180 obs. of  81 variables:
     $ subject                        : int  1 1 1 1 1 1 2 2 2 2 ...
     $ activity                       : chr  "laying" "sitting" "standing" "walking" ...
     $ tBodyAcc-mean()-X              : num  0.222 0.261 0.279 0.277 0.289 ...
     $ tBodyAcc-mean()-Y              : num  -0.04051 -0.00131 -0.01614 -0.01738 -0.00992 ...
     $ tBodyAcc-mean()-Z              : num  -0.113 -0.105 -0.111 -0.111 -0.108 ...
     $ tBodyAcc-std()-X               : num  -0.928 -0.977 -0.996 -0.284 0.03 ...
     $ tBodyAcc-std()-Y               : num  -0.8368 -0.9226 -0.9732 0.1145 -0.0319 ...
     $ tBodyAcc-std()-Z               : num  -0.826 -0.94 -0.98 -0.26 -0.23 ...
     $ tGravityAcc-mean()-X           : num  -0.249 0.832 0.943 0.935 0.932 ...
     $ tGravityAcc-mean()-Y           : num  0.706 0.204 -0.273 -0.282 -0.267 ...
     $ tGravityAcc-mean()-Z           : num  0.4458 0.332 0.0135 -0.0681 -0.0621 ...
     $ tGravityAcc-std()-X            : num  -0.897 -0.968 -0.994 -0.977 -0.951 ...
     $ tGravityAcc-std()-Y            : num  -0.908 -0.936 -0.981 -0.971 -0.937 ...
     $ tGravityAcc-std()-Z            : num  -0.852 -0.949 -0.976 -0.948 -0.896 ...
     $ tBodyAccJerk-mean()-X          : num  0.0811 0.0775 0.0754 0.074 0.0542 ...
     $ tBodyAccJerk-mean()-Y          : num  0.003838 -0.000619 0.007976 0.028272 0.02965 ...
     $ tBodyAccJerk-mean()-Z          : num  0.01083 -0.00337 -0.00369 -0.00417 -0.01097 ...
     $ tBodyAccJerk-std()-X           : num  -0.9585 -0.9864 -0.9946 -0.1136 -0.0123 ...
     $ tBodyAccJerk-std()-Y           : num  -0.924 -0.981 -0.986 0.067 -0.102 ...
     $ tBodyAccJerk-std()-Z           : num  -0.955 -0.988 -0.992 -0.503 -0.346 ...
     $ tBodyGyro-mean()-X             : num  -0.0166 -0.0454 -0.024 -0.0418 -0.0351 ...
     $ tBodyGyro-mean()-Y             : num  -0.0645 -0.0919 -0.0594 -0.0695 -0.0909 ...
     $ tBodyGyro-mean()-Z             : num  0.1487 0.0629 0.0748 0.0849 0.0901 ...
     $ tBodyGyro-std()-X              : num  -0.874 -0.977 -0.987 -0.474 -0.458 ...
     $ tBodyGyro-std()-Y              : num  -0.9511 -0.9665 -0.9877 -0.0546 -0.1263 ...
     $ tBodyGyro-std()-Z              : num  -0.908 -0.941 -0.981 -0.344 -0.125 ...
     $ tBodyGyroJerk-mean()-X         : num  -0.1073 -0.0937 -0.0996 -0.09 -0.074 ...
     $ tBodyGyroJerk-mean()-Y         : num  -0.0415 -0.0402 -0.0441 -0.0398 -0.044 ...
     $ tBodyGyroJerk-mean()-Z         : num  -0.0741 -0.0467 -0.049 -0.0461 -0.027 ...
     $ tBodyGyroJerk-std()-X          : num  -0.919 -0.992 -0.993 -0.207 -0.487 ...
     $ tBodyGyroJerk-std()-Y          : num  -0.968 -0.99 -0.995 -0.304 -0.239 ...
     $ tBodyGyroJerk-std()-Z          : num  -0.958 -0.988 -0.992 -0.404 -0.269 ...
     $ tBodyAccMag-mean()             : num  -0.8419 -0.9485 -0.9843 -0.137 0.0272 ...
     $ tBodyAccMag-std()              : num  -0.7951 -0.9271 -0.9819 -0.2197 0.0199 ...
     $ tGravityAccMag-mean()          : num  -0.8419 -0.9485 -0.9843 -0.137 0.0272 ...
     $ tGravityAccMag-std()           : num  -0.7951 -0.9271 -0.9819 -0.2197 0.0199 ...
     $ tBodyAccJerkMag-mean()         : num  -0.9544 -0.9874 -0.9924 -0.1414 -0.0894 ...
     $ tBodyAccJerkMag-std()          : num  -0.9282 -0.9841 -0.9931 -0.0745 -0.0258 ...
     $ tBodyGyroMag-mean()            : num  -0.8748 -0.9309 -0.9765 -0.161 -0.0757 ...
     $ tBodyGyroMag-std()             : num  -0.819 -0.935 -0.979 -0.187 -0.226 ...
     $ tBodyGyroJerkMag-mean()        : num  -0.963 -0.992 -0.995 -0.299 -0.295 ...
     $ tBodyGyroJerkMag-std()         : num  -0.936 -0.988 -0.995 -0.325 -0.307 ...
     $ fBodyAcc-mean()-X              : num  -0.9391 -0.9796 -0.9952 -0.2028 0.0382 ...
     $ fBodyAcc-mean()-Y              : num  -0.86707 -0.94408 -0.97707 0.08971 0.00155 ...
     $ fBodyAcc-mean()-Z              : num  -0.883 -0.959 -0.985 -0.332 -0.226 ...
     $ fBodyAcc-std()-X               : num  -0.9244 -0.9764 -0.996 -0.3191 0.0243 ...
     $ fBodyAcc-std()-Y               : num  -0.834 -0.917 -0.972 0.056 -0.113 ...
     $ fBodyAcc-std()-Z               : num  -0.813 -0.934 -0.978 -0.28 -0.298 ...
     $ fBodyAcc-meanFreq()-X          : num  -0.1588 -0.0495 0.0865 -0.2075 -0.3074 ...
     $ fBodyAcc-meanFreq()-Y          : num  0.0975 0.0759 0.1175 0.1131 0.0632 ...
     $ fBodyAcc-meanFreq()-Z          : num  0.0894 0.2388 0.2449 0.0497 0.2943 ...
     $ fBodyAccJerk-mean()-X          : num  -0.9571 -0.9866 -0.9946 -0.1705 -0.0277 ...
     $ fBodyAccJerk-mean()-Y          : num  -0.9225 -0.9816 -0.9854 -0.0352 -0.1287 ...
     $ fBodyAccJerk-mean()-Z          : num  -0.948 -0.986 -0.991 -0.469 -0.288 ...
     $ fBodyAccJerk-std()-X           : num  -0.9642 -0.9875 -0.9951 -0.1336 -0.0863 ...
     $ fBodyAccJerk-std()-Y           : num  -0.932 -0.983 -0.987 0.107 -0.135 ...
     $ fBodyAccJerk-std()-Z           : num  -0.961 -0.988 -0.992 -0.535 -0.402 ...
     $ fBodyAccJerk-meanFreq()-X      : num  0.132 0.257 0.314 -0.209 -0.253 ...
     $ fBodyAccJerk-meanFreq()-Y      : num  0.0245 0.0475 0.0392 -0.3862 -0.3376 ...
     $ fBodyAccJerk-meanFreq()-Z      : num  0.02439 0.09239 0.13858 -0.18553 0.00937 ...
     $ fBodyGyro-mean()-X             : num  -0.85 -0.976 -0.986 -0.339 -0.352 ...
     $ fBodyGyro-mean()-Y             : num  -0.9522 -0.9758 -0.989 -0.1031 -0.0557 ...
     $ fBodyGyro-mean()-Z             : num  -0.9093 -0.9513 -0.9808 -0.2559 -0.0319 ...
     $ fBodyGyro-std()-X              : num  -0.882 -0.978 -0.987 -0.517 -0.495 ...
     $ fBodyGyro-std()-Y              : num  -0.9512 -0.9623 -0.9871 -0.0335 -0.1814 ...
     $ fBodyGyro-std()-Z              : num  -0.917 -0.944 -0.982 -0.437 -0.238 ...
     $ fBodyGyro-meanFreq()-X         : num  -0.00355 0.18915 -0.12029 0.01478 -0.10045 ...
     $ fBodyGyro-meanFreq()-Y         : num  -0.0915 0.0631 -0.0447 -0.0658 0.0826 ...
     $ fBodyGyro-meanFreq()-Z         : num  0.010458 -0.029784 0.100608 0.000773 -0.075676 ...
     $ fBodyAccMag-mean()             : num  -0.8618 -0.9478 -0.9854 -0.1286 0.0966 ...
     $ fBodyAccMag-std()              : num  -0.798 -0.928 -0.982 -0.398 -0.187 ...
     $ fBodyAccMag-meanFreq()         : num  0.0864 0.2367 0.2846 0.1906 0.1192 ...
     $ fBodyBodyAccJerkMag-mean()     : num  -0.9333 -0.9853 -0.9925 -0.0571 0.0262 ...
     $ fBodyBodyAccJerkMag-std()      : num  -0.922 -0.982 -0.993 -0.103 -0.104 ...
     $ fBodyBodyAccJerkMag-meanFreq() : num  0.2664 0.3519 0.4222 0.0938 0.0765 ...
     $ fBodyBodyGyroMag-mean()        : num  -0.862 -0.958 -0.985 -0.199 -0.186 ...
     $ fBodyBodyGyroMag-std()         : num  -0.824 -0.932 -0.978 -0.321 -0.398 ...
     $ fBodyBodyGyroMag-meanFreq()    : num  -0.139775 -0.000262 -0.028606 0.268844 0.349614 ...
     $ fBodyBodyGyroJerkMag-mean()    : num  -0.942 -0.99 -0.995 -0.319 -0.282 ...
     $ fBodyBodyGyroJerkMag-std()     : num  -0.933 -0.987 -0.995 -0.382 -0.392 ...
     $ fBodyBodyGyroJerkMag-meanFreq(): num  0.176 0.185 0.334 0.191 0.19 ...

We can now write the csv file.

    
    
    
    
    
    
    write.csv(file="project_out.csv", vals.mean)
